---
layout:     post
title:      记一次oracle流复制传播进程故障
date:       2012-10-02
tags: [cnblogs]
---
检查发现两个流复制同步的数据库（RAC-单实例），数据不同步
于是决定重启流复制，可是在停止捕获后，但是无法顺利停下传播
 
BEGIN dbms_propagation_adm.stop_propagation(propagation_name => 'PROP_MASTER_TO_SLAVE'); END;
 
*
ERROR at line 1:
ORA-04021: timeout occurred while waiting to lock object
STRADMIN.CAPTURE_MASTER_QUEUE
ORA-06512: at "SYS.DBMS_AQADM_SYSCALLS", line 615
ORA-06512: at "SYS.DBMS_AQADM", line 963
ORA-06512: at "SYS.DBMS_PROPAGATION_INTERNAL", line 713
ORA-06512: at "SYS.DBMS_PROPAGATION_ADM", line 127
ORA-06512: at line 1
 
 
检查session发现
 
<td style="width: .7715in;">23</td><td style="width: .6868in;">000000025F7DDB18</td><td style="width: .6868in;">726</td><td style="width: .6868in;">65</td><td style="width: .7715in;">37097463</td><td style="width: .6868in;">000000025F54AA10</td><td style="width: .7715in;">66</td><td style="width: .6868in;">STRADMIN</td><td style="width: .6868in;">47</td><td style="width: .7715in;">2147483644</td><td style="width: .6868in;">000000025088FD30</td><td style="width: .6673in;"> </td><td style="width: .6868in;">ACTIVE</td><td style="width: .6868in;">DEDICATED</td><td style="width: .7715in;">0</td><td style="width: .6673in;">SYS</td><td style="width: .6868in;">oracle</td><td style="width: .7715in;">11554</td><td style="width: .6868in;">hecpxdb1</td><td style="width: .6673in;">pts/1</td><td style="width: .6868in;">sqlplus@hdb1 (TNS V1-V3)</td><td style="width: .6673in;">USER</td><td style="width: .6868in;">000000022DD9B250</td><td style="width: .7715in;">4162652390</td><td style="width: .6868in;">6k3gkhmw1u276</td><td style="width: .7715in;">0</td><td style="width: .6868in;">000000023CF16430</td><td style="width: .7715in;">1754843657</td><td style="width: .6868in;">8r2v7gxn9jkh9</td><td style="width: .6868in;">0</td><td style="width: .6868in;">8467</td><td style="width: .6868in;">4</td><td style="width: .6868in;">4716</td><td style="width: .7715in;">21</td><td style="width: .6868in;">SQL*Plus</td><td style="width: .7715in;">3669949024</td><td style="width: .5826in;"> </td><td style="width: .7715in;">0</td><td style="width: .5826in;"> </td><td style="width: .6868in;">27703065</td><td style="width: .6868in;">-1</td><td style="width: .6868in;">0</td><td style="width: .6868in;">0</td><td style="width: .6868in;">0</td><td style="width: .6868in;">2012-10-2 8:57</td><td style="width: .7715in;">507</td><td style="width: .6673in;">NO</td><td style="width: .6673in;">NONE</td><td style="width: .6673in;">NONE</td><td style="width: .6673in;">NO</td><td style="width: .6673in;"> </td><td style="width: .6868in;">DISABLED</td><td style="width: .6868in;">ENABLED</td><td style="width: .6868in;">ENABLED</td><td style="width: .7715in;">0</td><td style="width: .6673in;"> </td><td style="width: .6208in;">VALID</td><td style="width: .6868in;">1</td><td style="width: .6868in;">690</td><td style="width: .6868in;">25</td><td style="width: .7715in;">217</td><td style="width: .6868in;">library cache pin</td><td style="width: .6868in;">handle address</td><td style="width: .7715in;">10179795696</td><td style="width: .6868in;">000000025EC35AF0</td><td style="width: .6868in;">pin address</td><td style="width: .7715in;">9740240632</td><td style="width: .6868in;">00000002449046F8</td><td style="width: .6868in;">100*mode+namespace</td><td style="width: .6868in;">310</td><td style="width: .6868in;">136</td><td style="width: .6868in;">3875070507</td><td style="width: .7715in;">4</td><td style="width: .6868in;">Concurrency</td><td style="width: .6868in;">0</td><td style="width: .7715in;">507</td><td style="width: .6868in;">WAITING</td><td style="width: .6868in;">SYS$USERS</td><td style="width: .6868in;">DISABLED</td><td style="width: .6798in;">FALSE</td><td style="width: .5965in;">FALSE</td>



 
检查lock发现存在type=TQ 的记录id1对应的object为CAPTURE_MASTER_TABLE
 
检查alert日志发现几天没有logminer 的相关信息
 
简单重启数据库实例1
 
流复制切换到实例2上 

[BEGIN] 2012-10-2 9:32:41cat alert_db2.logTue Oct  2 09:14:21 2012Reconfiguration started (old inc 16, new inc 18)List of nodes: 1 Global Resource Directory frozen * dead instance detected - domain 0 invalid = TRUE Communication channels reestablished Master broadcasted resource hash value bitmaps Non-local Process blocks cleaned outTue Oct  2 09:14:21 2012 LMS 0: 0 GCS shadows cancelled, 0 closedTue Oct  2 09:14:21 2012 LMS 1: 0 GCS shadows cancelled, 0 closed Set master node info Submitted all remote-enqueue requests Dwn-cvts replayed, VALBLKs dubious All grantable enqueues granted Post SMON to start 1st pass IRTue Oct  2 09:14:21 2012Instance recovery: looking for dead threadsInstance recovery: lock domain invalid but no dead threadsTue Oct  2 09:14:21 2012 LMS 0: 320794 GCS shadows traversed, 0 replayedTue Oct  2 09:14:22 2012 LMS 1: 318669 GCS shadows traversed, 0 replayedTue Oct  2 09:14:22 2012 Submitted all GCS remote-cache requests Fix write in gcs resourcesReconfiguration completeTue Oct  2 09:14:25 2012ALTER SYSTEM SET service_names='SYS$STRADMIN.APPLY_MASTER_QUEUE.HEMASTER.COM' SCOPE=MEMORY SID='db2';Tue Oct  2 09:14:25 2012ALTER SYSTEM SET service_names='SYS$STRADMIN.APPLY_MASTER_QUEUE.HEMASTER.COM','SYS$STRADMIN.CAPTURE_MASTER_QUEUE.HEMASTER.COM' SCOPE=MEMORY SID='db2';Tue Oct  2 09:14:25 2012Streams CAPTURE C001 started with pid=127, OS id=31154Tue Oct  2 09:14:31 2012Redo thread 1 internally disabled at seq 28453 (CKPT)Tue Oct  2 09:14:31 2012ARC0: Archiving disabled thread 1 sequence 28453Tue Oct  2 09:14:48 2012Reconfiguration started (old inc 18, new inc 20)List of nodes: 0 1 Global Resource Directory frozen Communication channels reestablished * domain 0 valid = 1 according to instance 0Tue Oct  2 09:14:48 2012 Master broadcasted resource hash value bitmaps Non-local Process blocks cleaned outTue Oct  2 09:14:48 2012 LMS 1: 0 GCS shadows cancelled, 0 closedTue Oct  2 09:14:48 2012 LMS 0: 0 GCS shadows cancelled, 0 closed Set master node info Submitted all remote-enqueue requests Dwn-cvts replayed, VALBLKs dubious All grantable enqueues grantedTue Oct  2 09:14:49 2012 LMS 1: 7902 GCS shadows traversed, 4001 replayed LMS 1: 7942 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 7864 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 7868 GCS shadows traversed, 4001 replayed LMS 1: 7911 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 8093 GCS shadows traversed, 4001 replayed LMS 0: 7787 GCS shadows traversed, 4001 replayed LMS 0: 7919 GCS shadows traversed, 4001 replayed LMS 0: 7876 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 7986 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 7849 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 7883 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 8017 GCS shadows traversed, 4001 replayed LMS 0: 8055 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 7931 GCS shadows traversed, 4001 replayed LMS 1: 7934 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 7920 GCS shadows traversed, 4001 replayed LMS 0: 7889 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 7938 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 7859 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 7843 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 0: 7974 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:49 2012 LMS 1: 8042 GCS shadows traversed, 4001 replayed LMS 1: 7947 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7857 GCS shadows traversed, 4001 replayed LMS 0: 7864 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7957 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7805 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7871 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7984 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7975 GCS shadows traversed, 4001 replayed LMS 1: 7944 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7833 GCS shadows traversed, 4001 replayed LMS 0: 7905 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7968 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7961 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7878 GCS shadows traversed, 4001 replayed LMS 1: 7873 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7912 GCS shadows traversed, 4001 replayed LMS 0: 7849 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7871 GCS shadows traversed, 4001 replayed LMS 1: 7980 GCS shadows traversed, 4001 replayed LMS 1: 7946 GCS shadows traversed, 4001 replayed LMS 1: 7938 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7870 GCS shadows traversed, 4001 replayed LMS 0: 7826 GCS shadows traversed, 4001 replayed LMS 0: 7971 GCS shadows traversed, 4001 replayed LMS 0: 7801 GCS shadows traversed, 4001 replayed LMS 0: 7995 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7955 GCS shadows traversed, 4001 replayed LMS 1: 7932 GCS shadows traversed, 4001 replayed LMS 1: 7875 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7795 GCS shadows traversed, 4001 replayed LMS 0: 8051 GCS shadows traversed, 4001 replayed LMS 0: 7761 GCS shadows traversed, 4001 replayed LMS 0: 7918 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7939 GCS shadows traversed, 4001 replayed LMS 1: 7923 GCS shadows traversed, 4001 replayed LMS 1: 7903 GCS shadows traversed, 4001 replayed LMS 1: 7894 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7811 GCS shadows traversed, 4001 replayed LMS 0: 8019 GCS shadows traversed, 4001 replayed LMS 0: 7832 GCS shadows traversed, 4001 replayed LMS 0: 7995 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7885 GCS shadows traversed, 4001 replayed LMS 1: 7903 GCS shadows traversed, 4001 replayed LMS 1: 7982 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7894 GCS shadows traversed, 4001 replayed LMS 0: 7944 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 1: 7950 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:50 2012 LMS 0: 7889 GCS shadows traversed, 4001 replayed LMS 0: 7962 GCS shadows traversed, 4001 replayed LMS 0: 7869 GCS shadows traversed, 4001 replayed LMS 0: 7919 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:51 2012 LMS 1: 7916 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:51 2012 LMS 0: 7849 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:51 2012 LMS 1: 7887 GCS shadows traversed, 4001 replayedTue Oct  2 09:14:51 2012 LMS 0: 6276 GCS shadows traversed, 3149 replayedTue Oct  2 09:14:51 2012 LMS 1: 7949 GCS shadows traversed, 4001 replayed LMS 1: 7865 GCS shadows traversed, 4001 replayed LMS 1: 7887 GCS shadows traversed, 4001 replayed LMS 1: 7873 GCS shadows traversed, 4001 replayed LMS 1: 7947 GCS shadows traversed, 4001 replayed LMS 1: 3834 GCS shadows traversed, 1964 replayedTue Oct  2 09:14:51 2012 Submitted all GCS remote-cache requests Fix write in gcs resourcesReconfiguration completeTue Oct  2 09:14:56 2012LOGMINER: Parameters summary for session# = 1LOGMINER: Number of processes = 3, Transaction Chunk Size = 1LOGMINER: Memory Size = 10M, Checkpoint interval = 1000MTue Oct  2 09:14:56 2012LOGMINER: krvxpsr summary for session# = 1LOGMINER: StartScn: 38221548268 (0x0008.e62e8aec)LOGMINER: EndScn: 0LOGMINER: HighConsumedScn: 38221548268 (0x0008.e62e8aec)LOGMINER: session_flag 0x1LOGMINER: LowCkptScn: 38221494684 (0x0008.e62db99c)LOGMINER: HighCkptScn: 38221494685 (0x0008.e62db99d)LOGMINER: SkipScn: 38221494684 (0x0008.e62db99c)LOGMINER: session# = 1, builder process P001 started with pid=132 OS id=31456LOGMINER: session# = 1, reader process P000 started with pid=131 OS id=31454LOGMINER: session# = 1, preparer process P002 started with pid=133 OS id=31458Tue Oct  2 09:15:03 2012Redo thread 1 internally enabledTue Oct  2 09:15:03 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28422, +DG1/db/archivelog/2012_09_29/thread_1_seq_28422.5242.795265561Tue Oct  2 09:15:03 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20979, +DG1/db/archivelog/2012_09_29/thread_2_seq_20979.5069.795265223Tue Oct  2 09:15:20 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_2_seq_20979.5069.795265223Tue Oct  2 09:15:20 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20980, +DG1/db/archivelog/2012_09_29/thread_2_seq_20980.4539.795267121Tue Oct  2 09:15:22 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28422.5242.795265561Tue Oct  2 09:15:22 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28423, +DG1/db/archivelog/2012_09_29/thread_1_seq_28423.2647.795272467Tue Oct  2 09:16:01 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_2_seq_20980.4539.795267121Tue Oct  2 09:16:01 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20981, +DG1/db/archivelog/2012_09_29/thread_2_seq_20981.4282.795286681Tue Oct  2 09:16:16 2012Thread 2 advanced to log sequence 21018 (LGWR switch)  Current log# 4 seq# 21018 mem# 0: +DG1/db/onlinelog/group_4.270.708704025  Current log# 4 seq# 21018 mem# 1: +DG1/db/onlinelog/group_42Tue Oct  2 09:16:21 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28423.2647.795272467Tue Oct  2 09:16:21 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28424, +DG1/db/archivelog/2012_09_29/thread_1_seq_28424.5048.795283253Tue Oct  2 09:16:49 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28424.5048.795283253Tue Oct  2 09:16:49 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28425, +DG1/db/archivelog/2012_09_29/thread_1_seq_28425.924.795286927Tue Oct  2 09:16:52 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_2_seq_20981.4282.795286681Tue Oct  2 09:16:52 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20982, +DG1/db/archivelog/2012_09_29/thread_2_seq_20982.6099.795306027Tue Oct  2 09:17:00 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28425.924.795286927Tue Oct  2 09:17:00 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28426, +DG1/db/archivelog/2012_09_29/thread_1_seq_28426.1840.795294073Tue Oct  2 09:17:29 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28426.1840.795294073Tue Oct  2 09:17:29 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28427, +DG1/db/archivelog/2012_09_29/thread_1_seq_28427.2202.795306025Tue Oct  2 09:17:37 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28427.2202.795306025Tue Oct  2 09:17:37 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28428, +DG1/db/archivelog/2012_09_29/thread_1_seq_28428.2958.795306047Tue Oct  2 09:17:38 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_2_seq_20982.6099.795306027Tue Oct  2 09:17:41 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20983, +DG1/db/archivelog/2012_09_29/thread_2_seq_20983.2851.795308707Tue Oct  2 09:17:41 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28428.2958.795306047Tue Oct  2 09:17:41 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28429, +DG1/db/archivelog/2012_09_29/thread_1_seq_28429.2092.795307213Tue Oct  2 09:17:48 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28429.2092.795307213Tue Oct  2 09:17:48 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28430, +DG1/db/archivelog/2012_09_29/thread_1_seq_28430.6060.795308707Tue Oct  2 09:17:50 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28430.6060.795308707Tue Oct  2 09:17:50 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28431, +DG1/db/archivelog/2012_09_29/thread_1_seq_28431.921.795311983Tue Oct  2 09:17:50 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_2_seq_20983.2851.795308707Tue Oct  2 09:17:50 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20984, +DG1/db/archivelog/2012_09_29/thread_2_seq_20984.1959.795311983Tue Oct  2 09:17:53 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_2_seq_20984.1959.795311983Tue Oct  2 09:17:53 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20985, +DG1/db/archivelog/2012_09_30/thread_2_seq_20985.1548.795313131Tue Oct  2 09:17:54 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_29/thread_1_seq_28431.921.795311983Tue Oct  2 09:17:54 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28432, +DG1/db/archivelog/2012_09_30/thread_1_seq_28432.2779.795313127Tue Oct  2 09:17:54 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_1_seq_28432.2779.795313127Tue Oct  2 09:17:54 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28433, +DG1/db/archivelog/2012_09_30/thread_1_seq_28433.934.795337825Tue Oct  2 09:17:54 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_2_seq_20985.1548.795313131Tue Oct  2 09:17:54 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20986, +DG1/db/archivelog/2012_09_30/thread_2_seq_20986.5376.795366051Tue Oct  2 09:18:41 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_1_seq_28433.934.795337825Tue Oct  2 09:18:41 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28434, +DG1/db/archivelog/2012_09_30/thread_1_seq_28434.4458.795372827Tue Oct  2 09:18:58 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_2_seq_20986.5376.795366051Tue Oct  2 09:18:58 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20987, +DG1/db/archivelog/2012_09_30/thread_2_seq_20987.5050.795392413Tue Oct  2 09:19:05 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_1_seq_28434.4458.795372827Tue Oct  2 09:19:05 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28435, +DG1/db/archivelog/2012_09_30/thread_1_seq_28435.993.795393615Tue Oct  2 09:19:14 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_2_seq_20987.5050.795392413Tue Oct  2 09:19:14 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20988, +DG1/db/archivelog/2012_09_30/thread_2_seq_20988.3645.795392421Tue Oct  2 09:19:15 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_2_seq_20988.3645.795392421Tue Oct  2 09:19:15 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20989, +DG1/db/archivelog/2012_09_30/thread_2_seq_20989.3888.795393613Tue Oct  2 09:19:17 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_2_seq_20989.3888.795393613Tue Oct  2 09:19:17 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20990, +DG1/db/archivelog/2012_09_30/thread_2_seq_20990.906.795398385Tue Oct  2 09:19:17 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_1_seq_28435.993.795393615Tue Oct  2 09:19:17 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28436, +DG1/db/archivelog/2012_09_30/thread_1_seq_28436.2716.795396185Tue Oct  2 09:19:30 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_1_seq_28436.2716.795396185Tue Oct  2 09:19:30 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28437, +DG1/db/archivelog/2012_09_30/thread_1_seq_28437.6177.795398381Tue Oct  2 09:19:30 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_1_seq_28437.6177.795398381Tue Oct  2 09:19:30 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28438, +DG1/db/archivelog/2012_10_01/thread_1_seq_28438.1668.795485041Tue Oct  2 09:19:30 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_09_30/thread_2_seq_20990.906.795398385Tue Oct  2 09:19:30 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20991, +DG1/db/archivelog/2012_10_01/thread_2_seq_20991.4385.795484915Tue Oct  2 09:19:32 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20991.4385.795484915Tue Oct  2 09:19:32 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20992, +DG1/db/archivelog/2012_10_01/thread_2_seq_20992.4665.795485043Tue Oct  2 09:19:35 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20992.4665.795485043Tue Oct  2 09:19:35 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20993, +DG1/db/archivelog/2012_10_01/thread_2_seq_20993.2176.795485151Tue Oct  2 09:19:35 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28438.1668.795485041Tue Oct  2 09:19:35 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28439, +DG1/db/archivelog/2012_10_01/thread_1_seq_28439.1194.795485363Tue Oct  2 09:19:36 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20993.2176.795485151Tue Oct  2 09:19:36 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20994, +DG1/db/archivelog/2012_10_01/thread_2_seq_20994.6003.795485245Tue Oct  2 09:19:39 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20994.6003.795485245Tue Oct  2 09:19:39 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20995, +DG1/db/archivelog/2012_10_01/thread_2_seq_20995.2662.795485355Tue Oct  2 09:19:45 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20995.2662.795485355Tue Oct  2 09:19:45 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20996, +DG1/db/archivelog/2012_10_01/thread_2_seq_20996.3485.795485449Tue Oct  2 09:19:46 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28439.1194.795485363Tue Oct  2 09:19:46 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28440, +DG1/db/archivelog/2012_10_01/thread_1_seq_28440.4746.795485683Tue Oct  2 09:19:46 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20996.3485.795485449Tue Oct  2 09:19:46 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20997, +DG1/db/archivelog/2012_10_01/thread_2_seq_20997.1384.795485555Tue Oct  2 09:19:49 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20997.1384.795485555Tue Oct  2 09:19:49 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20998, +DG1/db/archivelog/2012_10_01/thread_2_seq_20998.2651.795485667Tue Oct  2 09:19:52 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20998.2651.795485667Tue Oct  2 09:19:52 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 20999, +DG1/db/archivelog/2012_10_01/thread_2_seq_20999.3909.795485973Tue Oct  2 09:19:54 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28440.4746.795485683Tue Oct  2 09:19:54 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28441, +DG1/db/archivelog/2012_10_01/thread_1_seq_28441.3861.795486145Tue Oct  2 09:19:55 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_20999.3909.795485973Tue Oct  2 09:19:56 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21000, +DG1/db/archivelog/2012_10_01/thread_2_seq_21000.2277.795486041Tue Oct  2 09:19:56 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21000.2277.795486041Tue Oct  2 09:19:56 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21001, +DG1/db/archivelog/2012_10_01/thread_2_seq_21001.4710.795486139Tue Oct  2 09:19:57 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21001.4710.795486139Tue Oct  2 09:19:57 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21002, +DG1/db/archivelog/2012_10_01/thread_2_seq_21002.6162.795486203Tue Oct  2 09:19:57 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28441.3861.795486145Tue Oct  2 09:19:57 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28442, +DG1/db/archivelog/2012_10_01/thread_1_seq_28442.6069.795486241Tue Oct  2 09:19:58 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21002.6162.795486203Tue Oct  2 09:19:58 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21003, +DG1/db/archivelog/2012_10_01/thread_2_seq_21003.836.795486221Tue Oct  2 09:20:00 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21003.836.795486221Tue Oct  2 09:20:00 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21004, +DG1/db/archivelog/2012_10_01/thread_2_seq_21004.2247.795486235Tue Oct  2 09:20:02 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21004.2247.795486235Tue Oct  2 09:20:02 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21005, +DG1/db/archivelog/2012_10_01/thread_2_seq_21005.4795.795486245Tue Oct  2 09:20:02 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28442.6069.795486241Tue Oct  2 09:20:02 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28443, +DG1/db/archivelog/2012_10_01/thread_1_seq_28443.2421.795486273Tue Oct  2 09:20:03 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21005.4795.795486245Tue Oct  2 09:20:03 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21006, +DG1/db/archivelog/2012_10_01/thread_2_seq_21006.5997.795486255Tue Oct  2 09:20:05 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21006.5997.795486255Tue Oct  2 09:20:05 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21007, +DG1/db/archivelog/2012_10_01/thread_2_seq_21007.5111.795486267Tue Oct  2 09:20:09 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21007.5111.795486267Tue Oct  2 09:20:09 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21008, +DG1/db/archivelog/2012_10_01/thread_2_seq_21008.2080.795486277Tue Oct  2 09:20:09 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28443.2421.795486273Tue Oct  2 09:20:09 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28444, +DG1/db/archivelog/2012_10_01/thread_1_seq_28444.1740.795486351Tue Oct  2 09:20:10 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21008.2080.795486277Tue Oct  2 09:20:10 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21009, +DG1/db/archivelog/2012_10_01/thread_2_seq_21009.6066.795486331Tue Oct  2 09:20:11 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21009.6066.795486331Tue Oct  2 09:20:11 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21010, +DG1/db/archivelog/2012_10_01/thread_2_seq_21010.3837.795486347Tue Oct  2 09:20:12 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21010.3837.795486347Tue Oct  2 09:20:12 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21011, +DG1/db/archivelog/2012_10_01/thread_2_seq_21011.1203.795486409Tue Oct  2 09:20:12 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28444.1740.795486351Tue Oct  2 09:20:13 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28445, +DG1/db/archivelog/2012_10_01/thread_1_seq_28445.2842.795486411Tue Oct  2 09:20:13 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21011.1203.795486409Tue Oct  2 09:20:13 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21012, +DG1/db/archivelog/2012_10_01/thread_2_seq_21012.6009.795552843Tue Oct  2 09:20:13 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28445.2842.795486411Tue Oct  2 09:20:13 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28446, +DG1/db/archivelog/2012_10_01/thread_1_seq_28446.5928.795520843Tue Oct  2 09:20:40 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28446.5928.795520843Tue Oct  2 09:20:40 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28447, +DG1/db/archivelog/2012_10_01/thread_1_seq_28447.756.795553273Tue Oct  2 09:21:05 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21012.6009.795552843Tue Oct  2 09:21:05 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21013, +DG1/db/archivelog/2012_10_01/thread_2_seq_21013.3432.795565215Tue Oct  2 09:21:05 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28447.756.795553273Tue Oct  2 09:21:05 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28448, +DG1/db/archivelog/2012_10_01/thread_1_seq_28448.1155.795564075Tue Oct  2 09:21:16 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28448.1155.795564075Tue Oct  2 09:21:16 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28449, +DG1/db/archivelog/2012_10_01/thread_1_seq_28449.2385.795566415Tue Oct  2 09:21:21 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21013.3432.795565215Tue Oct  2 09:21:22 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21014, +DG1/db/archivelog/2012_10_01/thread_2_seq_21014.1594.795567013Tue Oct  2 09:21:24 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28449.2385.795566415Tue Oct  2 09:21:24 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28450, +DG1/db/archivelog/2012_10_01/thread_1_seq_28450.4140.795571183Tue Oct  2 09:21:25 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21014.1594.795567013Tue Oct  2 09:21:25 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21015, +DG1/db/archivelog/2012_10_01/thread_2_seq_21015.3003.795571181Tue Oct  2 09:21:37 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_2_seq_21015.3003.795571181Tue Oct  2 09:21:37 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21016, +DG1/db/archivelog/2012_10_02/thread_2_seq_21016.1107.795572365Tue Oct  2 09:21:37 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_01/thread_1_seq_28450.4140.795571183Tue Oct  2 09:21:37 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28451, +DG1/db/archivelog/2012_10_02/thread_1_seq_28451.996.795572363Tue Oct  2 09:21:39 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_02/thread_1_seq_28451.996.795572363Tue Oct  2 09:21:39 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28452, +DG1/db/archivelog/2012_10_02/thread_1_seq_28452.2679.795601581Tue Oct  2 09:21:39 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_02/thread_2_seq_21016.1107.795572365Tue Oct  2 09:21:39 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21017, +DG1/db/onlinelog/group_3.269.708704023Tue Oct  2 09:21:52 2012LOGMINER: End mining logfile: +DG1/db/archivelog/2012_10_02/thread_1_seq_28452.2679.795601581Tue Oct  2 09:21:52 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28453, +DG1/db/onlinelog/group_1.257.708703637Tue Oct  2 09:21:53 2012LOGMINER: End mining logfile: +DG1/db/onlinelog/group_1.257.708703637Tue Oct  2 09:21:57 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21017, +DG1/db/onlinelog/group_3.269.708704023Tue Oct  2 09:21:57 2012LOGMINER: Begin mining logfile for session 1 thread 1 sequence 28454, +DG1/db/onlinelog/group_2.258.708703637Tue Oct  2 09:21:58 2012LOGMINER: End mining logfile: +DG1/db/onlinelog/group_3.269.708704023Tue Oct  2 09:21:58 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21018, +DG1/db/onlinelog/group_4.270.708704025Tue Oct  2 09:23:17 2012Thread 2 advanced to log sequence 21019 (LGWR switch)  Current log# 3 seq# 21019 mem# 0: +DG1/db/onlinelog/group_3.269.708704023  Current log# 3 seq# 21019 mem# 1: +DG1/db/onlinelog/group_32Tue Oct  2 09:23:22 2012LOGMINER: End mining logfile: +DG1/db/onlinelog/group_4.270.708704025Tue Oct  2 09:23:22 2012LOGMINER: Begin mining logfile for session 1 thread 2 sequence 21019, +DG1/db/onlinelog/group_3.269.708704023Tue Oct  2 09:23:23 2012ALTER SYSTEM SET service_names='SYS$STRADMIN.CAPTURE_MASTER_QUEUE.HEMASTER.COM','SYS$STRADMIN.APPLY_MASTER_QUEUE.HEMASTER.COM','db' SCOPE=MEMORY SID='db2';[oracle@hecpxdb2 bdump]$[END] 2012-10-2 9:33:11  由上面日志可见：流复制被切换到实例2后，将没有进行分析的归档日志进行了logminer；

待其处理完毕后检查业务表，发现数据已经同步完毕

 在操作过程中，单实例报了个错  Tue Oct  2 09:13:48 2012Errors in file /u01/app/oracle/admin/db/udump/db_ora_24642.trc:ORA-07445: exception encountered: core dump [kocdrtr()+163] [SIGSEGV] [unknown code] [0x000000000] [] []ORA-12161: TNS:internal error: partial data received 

暂记此处
